<!DOCTYPE html>
<html>
  <head>
    <!-- Standard Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <!-- Site Properities -->
    <title>Responsive Elements - Semantic</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/vendor.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/app.css">

    <script src="/javascripts/vendor.js"></script>
    <script src="/javascripts/app.js"></script>
  </head>
  <body>
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-KN3N6V"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KN3N6V');</script>
<!-- End Google Tag Manager -->

    <div id="game-box" class="main ui container">
      <div class="ui segment">
        <canvas id="c"></canvas>
        <img src="/image/graphic_orientation/moge2.png?1" id="my-image" style="display: none;">
      </div>
      <div>
        <button id="rotate-left">Rotate left</button>
        <button id="rotate-right">Rotate right</button>
      </div>
    </div>
    <script>
      (function() {

        function init_canvas() {
          var canvas = this.__canvas = new fabric.Canvas('c');
          canvas.setHeight(300);
          return canvas;
        }

        function create_rect(center_x) {
          var img = document.getElementById('my-image');
          return new fabric.Image(img, {
            left: center_x,
            top: 300,
            width: 100,
            height: 100,
            originX: 'center',
            originY: 'center'
          });
        }

        var canvas = init_canvas();
        var rect = create_rect(125);
        canvas.add(rect);

        fabric.util.addListener(document.getElementById('rotate-left'), 'click', function () {
          rect.animate('angle', -(360/5), {
            onChange: canvas.renderAll.bind(canvas),
            onComplete: function () {
              var next_center_x = rect.left -  (rect.width / 2);
              canvas.remove(rect);
              rect = create_rect(next_center_x);
              canvas.add(rect);
            }
          });
        });

        fabric.util.addListener(document.getElementById('rotate-right'), 'click', function () {
          rect.left = rect.left + (rect.width / 2);
          rect.originX = 'right';
          rect.animate('angle', 120, {
            onChange: canvas.renderAll.bind(canvas),
            onComplete: function () {
              canvas.remove(rect);
              rect = create_rect(rect.left);
              canvas.add(rect);
            }
          });
        });
      })();
    </script>
  </body>
</html>
